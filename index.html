<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Least Count Online</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>

<div id="screen-login" class="screen">
    <h1>Least Count</h1>
    <div class="login-box">
        <input type="text" id="username" placeholder="Enter Your Name" maxlength="12">
        <button class="btn-primary" onclick="ui.showLobby(true)">Create Room</button>
        <div class="divider">OR</div>
        <input type="text" id="room-id-input" placeholder="Enter Room Code">
        <button onclick="ui.showLobby(false)">Join Room</button>
    </div>
</div>

<div id="screen-lobby" class="screen" style="display:none;">
    <h2>Game Lobby</h2>
    <div class="lobby-container">
        <div class="lobby-info">
            <p>Room Code: <strong id="display-room-code">...</strong></p>
            <button class="btn-small" onclick="ui.copyLink()">Copy Invite Link</button>
        </div>
        
        <div class="customization-panel" id="host-controls" style="display:none;">
            <h3>Room Settings (Host Only)</h3>
            <div class="settings-grid">
                <label>Penalty: 
                    <select id="setting-penalty">
                        <option value="25">25</option>
                        <option value="50" selected>50</option>
                        <option value="100">100</option>
                    </select>
                </label>
                <label>Total Rounds: 
                    <input type="number" id="setting-rounds" value="5" min="3" max="30">
                </label>
            </div>
        </div>

        <div class="players-list">
            <h3>Players Joined</h3>
            <ul id="player-list-ul"></ul>
        </div>

        <button id="btn-start-game" class="btn-success" style="display:none;" onclick="multiplayer.startGame()">Start Game</button>
        <p id="wait-msg">Waiting for host to start...</p>
    </div>
</div>

<div id="screen-game" class="screen" style="display:none;">
    <div class="status-bar">
        <div id="round-number">Round: 1 / 5</div>
        <div id="turn-indicator">Your Turn</div>
        <div id="hand-points">Points: 0</div>
    </div>

    <div id="round-joker-info" class="round-joker-display"></div>

    <div class="game-board">
        <div class="pile-section">
            <div class="pile-wrapper">
                <p>Deck</p>
                <div id="deck" class="card deck-pile" onclick="game.handlePick('deck')">?</div>
            </div>
            <div class="pile-wrapper">
                <p>Discard</p>
                <div id="discard-pile" class="card" onclick="game.handlePick('discard')">-</div>
            </div>
        </div>

        <div class="pile-section">
            <table class="scoreboard">
                <thead>
                    <tr><th>Player</th><th>Round</th><th>Total</th></tr>
                </thead>
                <tbody id="score-body">
                    </tbody>
            </table>
        </div>
    </div>

    <div id="player-hand-container">
        <div id="player-hand"></div>
    </div>

    <div class="controls">
        <button id="btn-least" class="btn-least" onclick="game.callLeastCount()">CALL LEAST</button>
        <button id="btn-match" class="btn-match" onclick="game.handleMatchDrop()">MATCH & SKIP</button>
        <button id="btn-drop" class="btn-primary" onclick="game.handleStandardDrop()">DROP</button>
    </div>
</div>

<script src="game.js"></script>
</body>
</html>